**==Learning Method (CLAVE)==**

- Goal
  - Build courses from a Knowledge Graph (KG) where each atom is taught and mastery is proven before moving on.
- Atom
  - Each atom is taught with exactly 1 article and 1 PP100 question set.
  - Article scope: covers every step required by the atomâ€™s E/M/H items, or links to prerequisites where those steps live.
  - PP100 both teaches (with instructional feedback) and proves mastery.
- PP100 Algorithm (simple)
  - Levels: Easy -> Medium -> Hard; start at Easy.
  - State: level, total_correct, streak per level.
  - Next item: from current level for this atom, prefer never-seen, else least-recently-seen.
  - If correct: increment streak and total; if not at Hard and streak >= 2, move up a level and reset streaks.
  - If wrong: reset streak at current level; move down a level if not at Easy.
  - Stop (mastery): total_correct == 11, with at least 3 correct at Hard, and the last 2 questions correct at Hard.
- Optimized Diagnostic Placement (hybrid)
  - Use top-down ceiling probes per KG branch to find likely entry quickly.
  - If a ceiling probe is mastered, infer its chained prerequisites as needs checking (not auto-mastered). Confirm them later in SR reviews or a quick targeted probe.
  - On any miss, binary-search downward on that branch to the first solid floor, then begin learning one step above it.
  - Bound placement by time and item count to keep it short.
- Learning Loop per Atom
  - Teach the atom with the article.
  - Run PP100 for that atom.
  - If mastery is proven, move to the next atom in the plan.
  - If mastery is not proven, run a prerequisite diagnosis from this atom down its chained prerequisites until blocking gaps are found.
  - Use the identified gaps to create a gap-fill mini plan, complete it, then reteach and reassess the failed atom.
- Dynamic Lesson Plan
  - Plan updates after every PP100 outcome and each mastered-at date.
  - Signals
    - Knowledge gap detection from prerequisite diagnosis when mastery is not proven.
    - Spaced repetition using the date an atom was mastered.
    - PP100 sturdiness from accuracy and questions-to-master.
  - Planning Rules
    - High accuracy with few items: advance; schedule a standard or longer first review.
    - Modest accuracy or many items: add an early reinforcement review; add a quick targeted probe if errors cluster.
    - Not mastered: diagnose prerequisites, add gap-fill atoms, then reteach and reassess the original atom.
- Interleaving
  - Macro: naturally occurs by teaching different atoms over time.
  - Micro (inside reviews): mix items from multiple recently mastered, non-confusable atoms.
- Interference Control
  - Maintain a small set of confusable pairs in the KG.
  - Avoid scheduling confusable atoms back to back in new learning.
  - Exclude confusable pairs from the same consolidation or review set.
- Spaced Repetition (SR)
  - After an atom is mastered, schedule reviews based on mastery date and PP100 sturdiness.
  - Reviews are interleaved across multiple non-confusable atoms.
  - Use SR windows to verify prerequisites marked as needs checking via quick probes or embedded items.
  - Review pass: extend next interval per SR. Review fail: shorten interval and optionally insert a targeted probe.
- Review Test Construction (for SR and consolidation)
  - Objectives
    - Prove continued mastery of already mastered atoms.
    - Deliver SR on due atoms, mixing recent and older mastery dates as scheduled.
    - Apply interleaving and include layering via multi-skill composite items when available.
  - Selection rules
    - Build each review from 2 to 5 due atoms chosen by SR due date and sturdiness.
    - For each atom, pull a small, varied pool that covers typical errors and recent misses.
    - If layering exists among chosen atoms, include 1 to 2 composite items near the end.
  - Pass criteria
    - If all included atoms meet their review thresholds, extend their next intervals.
    - If any atom fails its threshold, schedule an early reinforcement review for that atom and consider a targeted probe before advancing new learning.
- Propagation States
  - Each atom has one of: mastered, needs checking, unmastered.
  - On mastery of an atom: credit its direct prerequisites in SR (they may require fewer explicit reviews).
  - On failure of an atom: mark dependents as needs checking until revalidated by reassessment of the parent.
- Priority Policy for Planning
  - Use test blueprints to score candidate next atoms.
    - Base score on how many test items this atom unlocks now.
    - Add decayed contribution from items unlocked further up the graph.
  - Prefer higher scoring atoms if prerequisites are ready and no interference rule is violated.
- Initial Placement
  - Start with the optimized diagnostic placement flow above to place the student at the right atom in the KG.
- KG Edges Needed (minimum)
  - Prerequisite edges: used for diagnosis, gap-fill, SR verification, and propagation.
  - Confusable pair edges: used to avoid harmful sequencing and to build safe interleaved review sets.
